![thulogo](./figs/logo_thu.jpg)
************************************
**共青团清华大学团委办公自动化系统需求说明文档**
****************
#版本说明
v1.3　作者：朱晓骅，罗成，2015年4月2日
*********************************************

# 概念定义
**小型活动**：是指较小规模的学生活动，通常为基层组织的会议、展览等，不需要使用大型场地（如综体、大礼堂等）。

**大型活动**：按照清华大学学生课外活动管理规定，大型学生活动是指满足以下条件之一的活动：（1）聚集人数在400人以上的室内活动；
（2）在室外需要搭建舞台、展棚、大型背板、使用大功率音响等的活动；
（3）涉及境外嘉宾和境外参与者的活动。申请单位需为清华大学团委认可的学生组织：校团委各部门、校系学生会、校系科协、在校团委注册的学生社团协会等；

----------

# 需求说明
## 功能说明


### 1. 学生活动审批 <!-- *这部分罗成负责* -->
<!-- 这部分与现有学生清华、我去网相结合，改进现有漏洞，添加若干功能，视觉上整合成完整的活动申请审批功能 -->	

* **小型活动审批系统**  
小型活动审批在目前的学生清华网站上完成，暂不整入团委自动化办公系统，需要进行的修改主要是优化管理员的活动审批界面，包括  
     1. 修改已审批、待审批、已过期、已撤销活动视图，分类查看相关活动。  
     2. 增加根据时间筛选活动的功能。提供起始日期、结束日期，查看相关活动的情况。  
     3. 增加活动批量导出。根据起始日期、结束日期搜索活动，批量导出。  
     4. 增加根据起始日期和结束日期的活动统计功能，根据处理结果进行统计，统计活动占用资源、一级审批单位，活动类型（如党团活动、等等）  
     
* **大活动网上申请向导**  
大型活动与小型活动申请审批的区别在于，必须按规定进行纸质表格的运转。这部分的功能主要是将目前下载电子表格填写的过程完全移到线上，通过表格在线填写进行活动信息的收集和备案，同时通过在线填写的过程对于活动申请须知进行更明确的说明。  
**流程及功能**  
（以下斜体部分在线下进行）  
     1. 学生在“学生清华”网站在线填写大型活动的基本信息，根据一系列规则生成申请表（根据活动类型加入需要审批的部门和内容），表格在线存储，确认后可打印为纸质表格；   
     填写相关信息：  

			1. 学生填写活动的基本信息，具体字段包含：活动名称、活动时间、校内主办单位、协办单位、联系人、负责人、是否室外、活动地点、校外合作单位、承办单位、联系人（手 机）、负责人（手 机）、是否需另接电线、活动方案简要说明  
			2. 说明邀请嘉宾情况，包含：校内嘉宾、校外嘉宾、外籍嘉宾等。对于每一位嘉宾，需要说明嘉宾基本信息或简历。  
			3. 需要填写活动的基本计划方案，主要内容。  
			4. 需要填写活动的观众情况，包括：观众总数、预计校内观众、预计校外观众  
			5. 需要填写活动涉及的校外媒体：邀请/未邀请，如果邀请，请填写邀请媒体单位。  
			6. 需要填写安全预案（上传附件）  
		
	2. *报送相关一级审批部门进行审批，如院系学生活动应该报送院系党委学生组，校团委部门、学生会活动应报送校团委书记会。*  
	3. *根据一级审批的情况，校团委办公室依据规定进行二级审批，加盖团委公章。根据活动的具体情况，报送校办、国际处、绿色大学办公室、艺术教育中心等单位进行三级审批。*  
	4. 在线备案的学生活动，办公室有权限进行在线查询和数据导出。
		<!-- 3. 社团协会账号备案（TODO）-->
			
### 2. 信息报送 <!-- *这部分朱晓骅负责* -->
<!-- 活动的报送功能，主要是信息的推送，文件的提交（简单的在线编辑），在线显示、查询，这部分目前团委办公室也不清晰，需要先梳理具体工作流程，再梳理网站功能流程 -->
* **定期简报**  
满足办公室及各部门定期/（不定期）收集信息需求，包括但不限于校团委全体会工作简报、每月团内信息、大型活动周报及其他需要收集统计的信息等（各部门都可以发布收集简报，由权限决定不同的发布范围）  
共性需求都是报送人（多为部门负责人）需要定期（每周、每月）需要填写一个表单，将简报内容进行汇总整理，可以在线查询或打印，并可以查询历史简报内容。   
**流程及功能**
     1. 简报信息收集人（办公室）设定简报信息收集的时间、对象（下拉框，列出团委18个部门，可全选）<!-- 涉及到是面对部门还是具体人的问题 -->、内容（表单项目，包括填空项、长文字填空项、可增减条目填空项、单选、多选、日期选择等）、汇总发布推送的对象、以及一些特殊的规则<!-- 比如限定时间填写，按先来后到排列等 -->
     2. 简报信息报送方（部门或人）可以上线<!-- 根据规则确定 -->填写需要报送的内容，进行简单的在线填写和编辑（填写表单、增删条目、可能还需要包括附件上传），并且进行确认提交（确认提交后即表明内容可以交付统计汇总）<!--这里又有权限的问题，比如部门的简报是只有部长可以编辑提交，还是部长可以指定人编辑提交，还是可以指定人编辑但是必须部长确认提交 -->。
     3. 临近截止时间时，可以单独给未提交的部门发送提醒（邮件、站内提醒）。收集截止时间到，或由信息收集人操作后，对填写的表单信息进行统计整合汇总为一个完整的表单，可以直接复制入word，也可以导出为csv文件，收集人可以根据需要进一步进行修改，以设定的方式（网页显示、邮件发送等）供设定的推送对象查看。
     4. 可以通过平台查询和列出之前提交的和汇总后的简报。信息收集人可以确定可以查询的权限。<!-- 这里仍然是有一个权限的问题，究竟谁能看到哪些简报的内容。 -->  
* **新闻稿**  
一个投稿和稿件管理的系统，以部门和学生组织的名义投递活动新闻稿，校团委部门对新闻稿进行审批和修改，由学生清华管理员审核发布新闻，并且可以得到投稿相关的统计（投稿数、采用数、点击量）。在期末可以根据投稿数量给予表彰。  
**流程及功能**  
     1. 个人可以在平台进行新闻稿简单的在线编辑（输入内容，增加简单的格式，上传图片，对word复制友好），设定提交新闻稿的部门，进行确认提交
     2. 校团委对应管理部门对于稿件内容进行审核、确认。
     3. 学生清华对于稿件进行审核<!--这部分的审批是不是应该由宣传部进行?-->，对于不符合规范或有问题的稿件打回要求修改、对于已确认没有问题的稿件进行简单修改后发布到学生清华网站。
     4. 学生清华管理员和办公室可以对于提交的新闻稿进行统计，获得包括投稿数量、采用数量、点击数等一些数据。
* **临时活动报名** <!-- 指的是校团委内部各部门报送活动报名-->   
指团委需要各部门组织报名某一活动的需求。活动组织方（部门和学生组织负责人）可以定义一个一般表格，设定报名的部门范围，并且可以获得整理汇总后的报名结果。  
**流程及功能**
     1. 活动组织方定制一个活动报名，包括活动的信息（名称、时间、地点、主办方等），以及活动报名的部门和需要报名的人数、条件。
     2. 各部门内部汇总报名信息后填写表单。
     3. 活动组织方可以实时查询、导出、下载活动报名者填写的信息。               


### 3. 档案归档 <!-- *这部分刘国微、黎明负责* -->
<!-- 这部分需要明确具体工作的流程 -->
* **部门档案/年鉴材料收集管理** 
分别实现年鉴、档案的收集、存档和管理，对于部门的要求是将文件打包上传，部门可以进行替换删除，办公室对于全团委档案材料进行管理。上传存储利用FTP与团委现有FTP（总空间13T,现空闲12T）  
**流程及功能**  
     1. 各部门可按年度查询往年上传的档案、年鉴材料，并可下载  
     2. 各部门可上传该年度应提交的档案、年鉴材料电子版，有替换、删除权限  
     3. 办公室可开通上传窗口，有下载、删除已上传材料权限  
     4. 档案年鉴材料格式包括word、pdf等文档格式，音像制品等其他形式线下存档  
* **文号查询申请**  
实现对于校团委发文文号的管理和备案。  
**流程及功能** 
	1. 各部门登陆后可查询历史文号、现有文号排序，可查看并下载历史发文内容。
	2. 各部门可提交文号申请，经办公室批准后内容自动发布，文号实时更新，发文内容线下请示确定。
	3. 正式发文后，由办公室负责上传发文进行备案。
	 
### 4. 网上记账报表 <!-- *这部分朱晓骅负责* -->
<!-- 
网上记账主要包括三个部分，一个是现有账目记录操作的在线化（即将原先在excel中的操作放到网上）；第二个是账目记录的在线显示（即根据权限校团委书记/副书记/部长可以看到管理的部门的账务和资产统计)；第三个是借款、预决算等过程的在线操作，即实现同学填写、部门确认、副书记审批、（书记会审批）的流程。  -->
* **在线记账**  
即团委财务负责人按条目录入输入账目信息，根据项目、部门设置校团委书记/副书记/部长可以查看具体分管的账目。  
**流程及功能**  
     1. 团委财务负责人录入账目信息（记账摘要、所属费用类型、部门/项目、预支金额、实支金额、应补/应退、项目编号、经费来源等），其中所属费用类型、部门/项目等是可选项（标签），可以选择已有的选项，也可创建新选项。
     2. 录入的账目信息自动汇总为账务明细表格，可以根据各项进行排序、筛选、进一步的编辑。可以根据部门、项目等筛选列出具体账目，并且进行简单统计。
     3. 团委财务负责人可以设定项目/部门对应的校团委的负责人，设定查询的权限，校团委书记/副书记/部长可以根据权限查询分管部门、项目的账目信息  
* **预决算管理**  
即团委部门学期初/活动前提交预算表，学期末/活动后提交决算表，预算表和决算表均需要通过部门负责人确认/主管副书记确认/（书记会确认）的流程。同时在决算填写过程中，需要选择对应的预算项目，生成决算表的同时生成预决算对比分析。  
**流程及功能**  
     1. 开学初/活动前由校团委部门填写预算表各项信息，包括部门、日期、负责人、工作/活动名称，资金来源、金额和落实情况、报销单位、支出项目。其中支出项目为可自由增加删除条目，每一条包括类型、支出金额和备注。  
     2. 填写完成后提交部门负责人进行确认，存在问题部门负责人可以进行修改。部门负责人确认后由主管副书记进行审批和修改，审批通过推送至团委财务负责人，审批不通过退回部门负责人进行修改。如有超过万元以上预算，需要经过书记会讨论的，讨论通过后，由财务负责人更新预算表状态。
     3. 部门负责人和主管副书记可以查询所管理部门的预算表。
     4. 学期末/活动后由校团委部门填写决算表各项信息，填写过程中，对应预算表在旁边自动列出对应。支出项目的填写方法是先选择预算表中的具体项目，然后填写实际支出金额和备注，预算表中没有对应的项目可以单独增加。填写完成后，自动列出预决算收入支出的对比。
     5. 决算表填写完成后提交部门负责人进行修改确认，部门负责人确认后由主管副书记进行审批，审批通过后推送至团委财务负责人。
* **借还款办理**  
即实现同学填写借款申请，部门负责人和团委财务负责人确认的在线登记过程，录入信息同时纳入上述的团委账目中。  
**流程及功能**  
     1. 同学填写申请借款凭证，内容包括用途摘要、借款方式、金额、所属部门、经费来源、收款单位信息、借款人联系方式等
     2. 填写确认后，推送至部门负责人对该笔借款进行确认。部门负责人确认无误后，由团委财务负责人进行确认，确认通过后借款即进入线下流程。线下借款流程办理后（转账完成或交付现金后），账目即进入团委财务明细账。
     3. 团委财务负责人可以查看所有借款情况。借款人、部门负责人、主管副书记可以根据权限查询所负责的借款情况，借款情况汇总为借款登记簿表格。
     4. 借款完成后，团委财务负责人可以更新借款状态。
     5. 借款办理全过程中，遇到问题团委财务负责人可以向借款人推送网站消息和邮件进行提醒和联系。  
* **固定资产统计**
实现资产购置申请审批到固定资产入账信息填写的全过程。  
**流程及功能** 
     1. 部门填写资产购置申请表，信息包括申请资产名称、规格型号、价格、经费来源、购置理由。
     2. 确认提交后有部门负责人进行确认、审核和修改。审核确认后由部门主管负责人进行审核，确认后推送至财务负责人。
     3. 设备购置完成后，部门填写固定资产入账信息明细表，信息包括资产名称、型号、规格、厂家、出厂号、出厂日期、领用人、仪器负责人、一起存放地点。
     4. 填入的资产购置申请和入账的固定资产信息均进行汇总统计，团委财务负责人可以查询汇总后的资产明细表，并进行修改维护。各部门负责人可查询本部门的资产信息。  
* **涉及角色和权限**  
     1. 校团委办公室：拥有管理财务账目的权限  
     2. 校团委部门：提交各类表格的权限，部门负责人可以分配给部门辅导员  
     3. 校团委部门负责人：对于提交的各类表格的确认、审核和修改，查看部门的账目情况  
     4. 校团委书记/副书记：对于分管部门的提交进行审批确认，查看分管部门的账目情况  
### 5. 场地资源 <!-- *这部分刘国微、罗成负责* -->
<!-- 这部分是全新的工作，目前实体化的没有进行 -->
* **统管学生场地**  
实现统管学生场地信息数据的维护管理。  
**流程及功能** 
     1. 每学期初办公室对于团委统管的学生活动场地数据库进行维护。更新学生活动场地的基本信息，包含：房间号，房间基本配置/资源，房间负责部门
     2. 每学期场地借用的部门负责人需要对于房间借用进行确认，确认了解相关管理规定，并更新实际使用联系人和消防等工作负责人信息
     3. 办公室可以通过平台向场地负责人、消防负责人等推送相关通知公告
     4. 办公室可以发布卫生、消防检查的结果，对于存在问题的责令整改，对于限期不整改的，可以暂时取消场地使用的权限。

### 6. 人员管理 <!-- *这部分罗成负责* -->
<!-- 这部分需要联系办公室和组织部协作完成 -->
* **辅导员申请、聘任、sql实图，学生申请**  
实现对于辅导员的管理、聘任等信息  
**流程及功能**  
	 1. 管理员（组织部）在网络上发布本学期岗位，任何清华大学学生都可以看到该通知，其中包含岗位、岗位要求等。任何人都可以查看岗位申请。可以针对岗位申请，填写相关字段（TODO:字段待组织部补充），提交申请。  
	 2. 申请可以设置截止日期，超过截止日期就不再受理。  
	 3. 管理员（组织部）可以通过后台看到不同岗位的申请，选择通过或驳回。可以看到每一个申请的详情。  
	 4. 通过申请的辅导员自动进入在岗辅导员信息库。  
	 5. 将离任辅导员的权限收回，或对之前提交的工作内容改成只读形式。
	 6. 辅导员每周上网填写工作周报，作为档案的一部分，且工作周报对团委全部其他辅导员、教师可见。
* **学生干部信息库**  
实现对于学生干部个人信息的管理、维护、查询等功能。  
**流程及功能**  
	 1. 信息包括个人基本信息、荣誉、一段话简历、社工工作履历（起始时间，结束时间）、工作考核。（TODO：字段待组织部补充）  
	 2. 学生干部包含三种状态：申请中，在岗，离岗，离岗辅导员也可以修改信息  
	 3. 对于学生干部，管理员（组织部）可以添加荣誉，增加履历等  
	 4. 对于学生干部信息导出，可以提供sql语句进行检索。具体来说，可以输入一段sql，然后将符合条件的辅导员信息导出一张表格  
	 5. 管理员可以生成辅导员的考评请求，发送给书记会的老师，书记会的老师任何一人都可以对该辅导员进行考评。考评结果作为学生干部数据的一部分存档  
* **团委教师信息录入**  
实现对于团委教师信息的管理、维护、查询等功能  
**流程及功能**  
	 1. 团委教师需要录入：基本信息（姓名，性别，办公电话，手机，邮箱），一段话简历，社会工作建立，学术履历，荣誉等。
	 2. 对于团委教师履历，组织部可以进行维护。
		
	

## 角色与权限
理想的实现方式是为每个人的个人账户分配不同的角色和权限，**尽可能避免所谓“管理员账号”或者“部门公共账号”的出现。**除了个人的基本权限以外，一部分与工作岗位（书记、副书记、部长）和承担责任（主要是审批等）相关的权限是与每个人的角色相关的，落实到人；而另外一部分与部门工作相关的权限（比如报送、申请信息的填写）是可以进行分配的，避免出来个人账号（部长、副书记）公开或者给来给去的情况。  

具体的角色有：
#### 1. 校团委办公室
#### 2. 校团委书记/副书记
#### 3. 校团委部长/中心主任
#### 4. 校团委辅导员
#### 5. 学生组织负责人
比如社团、兴趣团队等
#### 6. 院系团委书记
是否也有涉及的功能？
#### 7. 直接面向普通同学（而非部门和工作岗位）的权限
这个可以暂缓涉及
#### 8. 平台管理员

